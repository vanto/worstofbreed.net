---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
    // We only generate one index page, but we need to know the latest edition during build
    // Actually, for a static index page that redirects, we don't need getStaticPaths if it's not a dynamic route.
    // But we need to fetch data to know where to redirect.
    return [];
}

const blips = await getCollection("blips");
const editions = new Set<string>();
blips.forEach((b) => editions.add(b.data.edition || "2025"));
const sortedEditions = Array.from(editions).sort(); // Lexicographically sort
const latestEdition = sortedEditions[sortedEditions.length - 1];

import Layout from "../../layouts/Layout.astro";
import { LATEST_PUBLISHED_EDITION } from "../../config";

const latestUrl = `/radar/${LATEST_PUBLISHED_EDITION}`;
---

<Layout
    title="Redirecting..."
    description="Tech Radar: A curated list of technologies that should be illegal. We track the industrys most successful cargo cults and zombie frameworks."
>
    <div class="redirect-container">
        <h2>Redirecting...</h2>
        <p>
            If you are not redirected automatically, <a href={latestUrl}
                >click here for the latest edition</a
            >.
        </p>
    </div>
</Layout>

<style>
    .redirect-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 50vh;
        text-align: center;
    }
    h2 {
        font-size: 2rem;
        margin-bottom: 1rem;
    }
</style>
---
